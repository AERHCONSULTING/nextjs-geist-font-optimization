(()=>{var e={};e.id=636,e.ids=[636],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},54300:(e,r,s)=>{"use strict";s.d(r,{J:()=>l});var t=s(60687),a=s(43210),n=s(14163),d=a.forwardRef((e,r)=>(0,t.jsx)(n.sG.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));d.displayName="Label";var i=s(4780);function l({className:e,...r}){return(0,t.jsx)(d,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}},59674:(e,r,s)=>{Promise.resolve().then(s.bind(s,75758))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},75758:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/project/sandbox/user-workspace/src/app/profile/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/project/sandbox/user-workspace/src/app/profile/page.tsx","default")},87032:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u});var t=s(60687),a=s(43210),n=s(29523),d=s(44493),i=s(89667),l=s(54300),o=s(91821),c=s(88894);function u(){let{user:e}=(0,c.A)(),[r,s]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[h,v]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),N=e=>{let r=e.length>=8,s=/[A-Z]/.test(e),t=/[a-z]/.test(e),a=/[0-9!@#$%^&*(),.?":{}|<>]/.test(e);return r&&s&&t&&a},w=async t=>{if(t.preventDefault(),v(!0),g(""),j(""),!r||!u||!m){g("Tous les champs sont requis"),j("error"),v(!1);return}if(u!==m){g("Les nouveaux mots de passe ne correspondent pas"),j("error"),v(!1);return}if(!N(u)){g("Le nouveau mot de passe doit contenir au moins 8 caract\xe8res avec majuscules, minuscules et chiffres/caract\xe8res sp\xe9ciaux"),j("error"),v(!1);return}if(r===u){g("Le nouveau mot de passe doit \xeatre diff\xe9rent de l'ancien"),j("error"),v(!1);return}try{let t=await fetch("/api/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:r,newPassword:u,email:e?.email}),credentials:"include"}),a=await t.json();t.ok?(g("Mot de passe chang\xe9 avec succ\xe8s !"),j("success"),s(""),p(""),x("")):(g(a.message||"Erreur lors du changement de mot de passe"),j("error"))}catch(e){g("Erreur de connexion au serveur"),j("error")}finally{v(!1)}};return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:"Mon Profil"}),(0,t.jsx)("p",{className:"text-emerald-700",children:"Gestion de votre compte AERH CONSULTING TAHITI"})]}),(0,t.jsxs)(d.Zp,{className:"bg-white/90 backdrop-blur-sm",children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{className:"text-emerald-800",children:"Informations du Compte"}),(0,t.jsx)(d.BT,{children:"D\xe9tails de votre compte administrateur"})]}),(0,t.jsxs)(d.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{className:"text-emerald-700",children:"Email"}),(0,t.jsx)("div",{className:"p-2 bg-emerald-50 rounded border",children:e?.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{className:"text-emerald-700",children:"R\xf4le"}),(0,t.jsx)("div",{className:"p-2 bg-emerald-50 rounded border",children:e?.role==="admin"?"Administrateur":"Utilisateur"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{className:"text-emerald-700",children:"Nom"}),(0,t.jsx)("div",{className:"p-2 bg-emerald-50 rounded border",children:e?.name})]})]})]}),(0,t.jsxs)(d.Zp,{className:"bg-white/90 backdrop-blur-sm",children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{className:"text-emerald-800",children:"Changer le Mot de Passe"}),(0,t.jsx)(d.BT,{children:"Modifiez votre mot de passe pour renforcer la s\xe9curit\xe9 de votre compte"})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"currentPassword",className:"text-emerald-700",children:"Mot de passe actuel"}),(0,t.jsx)(i.p,{id:"currentPassword",type:"password",placeholder:"Votre mot de passe actuel",value:r,onChange:e=>s(e.target.value),required:!0,disabled:h,className:"border-emerald-300 focus:border-emerald-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"newPassword",className:"text-emerald-700",children:"Nouveau mot de passe"}),(0,t.jsx)(i.p,{id:"newPassword",type:"password",placeholder:"Minimum 8 caract\xe8res",value:u,onChange:e=>p(e.target.value),required:!0,disabled:h,className:"border-emerald-300 focus:border-emerald-500"}),(0,t.jsx)("p",{className:"text-xs text-emerald-600",children:"8 caract\xe8res minimum avec majuscules, minuscules et chiffres/caract\xe8res sp\xe9ciaux"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.J,{htmlFor:"confirmPassword",className:"text-emerald-700",children:"Confirmer le nouveau mot de passe"}),(0,t.jsx)(i.p,{id:"confirmPassword",type:"password",placeholder:"R\xe9p\xe9tez le nouveau mot de passe",value:m,onChange:e=>x(e.target.value),required:!0,disabled:h,className:"border-emerald-300 focus:border-emerald-500"})]}),f&&(0,t.jsx)(o.Fc,{className:"success"===b?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:(0,t.jsx)(o.TN,{className:"success"===b?"text-green-800":"text-red-800",children:f})}),(0,t.jsx)(n.$,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700",disabled:h,children:h?"Changement en cours...":"Changer le mot de passe"})]})})]}),(0,t.jsxs)(d.Zp,{className:"bg-emerald-50 border-emerald-200",children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{className:"text-emerald-800",children:"\uD83D\uDD10 Conseils de S\xe9curit\xe9"})}),(0,t.jsxs)(d.Wu,{className:"space-y-3 text-sm text-emerald-700",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"text-emerald-600",children:"•"}),(0,t.jsx)("span",{children:"Changez votre mot de passe r\xe9guli\xe8rement (tous les 3-6 mois)"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"text-emerald-600",children:"•"}),(0,t.jsx)("span",{children:"Utilisez un mot de passe unique pour ce compte"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"text-emerald-600",children:"•"}),(0,t.jsx)("span",{children:"Ne partagez jamais vos identifiants avec d'autres personnes"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"text-emerald-600",children:"•"}),(0,t.jsx)("span",{children:"D\xe9connectez-vous toujours apr\xe8s utilisation sur un ordinateur partag\xe9"})]})]})]})]})}},89667:(e,r,s)=>{"use strict";s.d(r,{p:()=>n});var t=s(60687);s(43210);var a=s(4780);function n({className:e,type:r,...s}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}},90867:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>d.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var t=s(65239),a=s(48088),n=s(88170),d=s.n(n),i=s(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(r,l);let o={children:["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,75758)),"/project/sandbox/user-workspace/src/app/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/project/sandbox/user-workspace/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,54431)),"/project/sandbox/user-workspace/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/project/sandbox/user-workspace/src/app/profile/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},91821:(e,r,s)=>{"use strict";s.d(r,{Fc:()=>i,TN:()=>l});var t=s(60687);s(43210);var a=s(24224),n=s(4780);let d=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...s}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(d({variant:r}),e),...s})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...r})}},99842:(e,r,s)=>{Promise.resolve().then(s.bind(s,87032))}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,816,259],()=>s(90867));module.exports=t})();